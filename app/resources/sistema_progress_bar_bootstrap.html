<!--[main]-->

<div class="progress">
    <div class="progress-bar" id="send-progress-bar" role="progressbar" style="width: 5%;" aria-valuenow="100"
        aria-valuemin="0" aria-valuemax="100">0%</div>
</div>
<!-- 
<div id="chart_bar_div_{$uniqid}" class="chart" style="width: {$width}; height: {$height};"> <i
        class="fa fa-spinner fa-pulse fa-2x fa-fw"></i>Loading </div> -->

<br>
<div class="well well-small" style="margin-top: 10px;">
    <br>
    <h3>Lista de quem receber√° a mensagem:</h3>
</div>
<table id="example" class="table table-striped table-bordered" style="width:100%">
    <thead>
        <tr>
            <th>#ID</th>
            <th>Nome</th>
            <th>Contato</th>
        </tr>
    </thead>
    <tbody>
        <!--[contacts]-->
        <tr>
            <td>{$id}</td>
            <td>{$nome}</td>
            <td><span class="phone_number">{$telefone}</span></td>
        </tr>
        <!--[/contacts]-->

    </tbody>
    <tfoot>
        <tr>
            <th>#ID</th>
            <th>Nome</th>
            <th>Contato</th>
        </tr>
    </tfoot>
</table>


<script>


    $(document).ready(function () {
        $('#example').DataTable();
    });
    $(document).ready(function () {


        $(".phone_number").each(function (index, element) {
            // element == this

            let phoneNumber = formatPhoneNumber($(this).text());

            $(this).text(phoneNumber);

        });


        function formatPhoneNumber(phoneNumberString) {
            //Filter only numbers from the input



            let cleaned = ('' + phoneNumberString).replace(/\D/g, '');

            //Check if the input is of correct length
            let match = cleaned.match(/^(\d{2})(\d{1})(\d{4})(\d{4})$/);

            if (match) {
                return `(${match[1]}) ${match[2]} ${match[3]}-${match[4]}`
            };

            return cleaned
        }




    })





</script>
<!--[/main]-->